<head>
  <title>Find Your Nearest Store | Toast</title>
  <meta name="description" content="Information on shipping, delivery and other frequently asked questions">
</head>

<script type="text/javascript" src="//maps.googleapis.com/maps/api/js?v=3"></script> 
<script type="text/javascript" src="//d2xfispw8k8nwr.cloudfront.net/js/min/markerclusterer.js"></script>
<style>

#map_canvas {height: 700px; width: 100%}


@media only screen and (max-width: 768px) 
{
#map_canvas {height: 400px; width: 100%}
}
</style>


<div class="grid-100 mobile-grid-100 tablet-grid-100 grid-parent helpSection">
  <nav id="breadcrumb" class="hide-on-tablet hide-on-mobile grid-60 grid-parent">
    <ul>
      <li><a href="/"><span>HOME</span></a></li>
      <li><span>SHOP LOCATOR</span></li>
    </ul>
  </nav>
<div class="row ">
  <div class="col-md-12 margintop">
    <div class="col-sm-3 col-md-2 navItems">
      <ul>
        <li class="link map sansMedium"><a href="#map" >Map</a></li>
        <li class="link bath sansMedium"><a href="#bath" >Bath</a></li>
        <li class="link brighton sansMedium"><a href="#brighton" >Brighton</a></li>
        <li class="link chelsea sansMedium"><a href="#chelsea">Chelsea</a>
        <li class="link cheltenham sansMedium"><a href="#cheltenham">Cheltenham</a></li>
        <li class="link harrogate sansMedium"><a href="#harrogate">Harrogate</a></li>
        <li class="link islington sansMedium"><a href="#islington">Islington</a></li>
        <li class="link kilver sansMedium"><a href="#kilver">Kilver</a></li>
        <li class="link llandeilo sansMedium"><a href="#llandeilo">Llandeilo</a></li>
        <li class="link marylebone sansMedium"><a href="#marylebone">Marylebone</a></li>
        <li class="link westbournegrove sansMedium"><a href="#westbournegrove">Westbourne Grove</a></li>
        <li class="link oxfordsansMedium"><a href="#oxford">Oxford</a></li>
      </ul>
    </div>
    <div class="col-sm-9 col-md-10 col-xs-12 helpContentArea textBook"></div>
  </div>
</div>

     </div> 
<script>

/// navigation and content load

jQuery.support.cors = true
function loadNav(navItem) {
    $(".parent").css("background-image", "url(//d2xfispw8k8nwr.cloudfront.net/images/arrow.gif)")
    $("." + navItem).css("background-image", "url(//d2xfispw8k8nwr.cloudfront.net/images/down_arrow.gif)")
    if (!$("." + navItem + " .subvav").is(":visible")) {
        $(".subnav").not(this).removeClass('visible')
        $("." + navItem + " .subnav").addClass('visible')
        loadContent($("." + navItem + " .subnav li").first().attr("class").split(" ")[1])
    }
}
function loadExclusions() {
   //$(".helpContentArea").load(contentFile + ".htm", function(responseTxt, statusTxt, xhr) {
    $(".helpContentArea").load("https://s3.eu-west-2.amazonaws.com/toast-stores-files/" + contentFile + ".htm", function(responseTxt, statusTxt, xhr) {
      if (statusTxt == "error") {
        $(".helpContentArea").html("Error loading content: " + xhr.status + ": " + xhr.statusText)
      }
    })
}

function loadContent(contentFile) {
    $(".helpContentArea").html("Loading")
    $(".navItems a").removeClass("active")
    $("." + contentFile + " a").addClass("active")
    //$(".helpContentArea").load(contentFile + ".htm", function(responseTxt, statusTxt, xhr) {
    $(".helpContentArea").load("https://s3.eu-west-2.amazonaws.com/toast-stores-files/" + contentFile + ".htm", function(responseTxt, statusTxt, xhr) {
        if (statusTxt == "error") {
            $(".helpContentArea").html("<div class='errorText'>Error loading content: " + contentFile + " Error cause: " + xhr.status + ": " + xhr.statusText + "</div>")
        }
    })
}

function internalContent(passedHash) {
    $(".parent").css("background-image", "url(//d2xfispw8k8nwr.cloudfront.net/images/arrow.gif)");
    $(".subnav").removeClass('visible')
    window.location.hash = passedHash
    if (window.location.hash) {
        $("." + window.location.hash.substring(1)).parent().addClass("visible")

        if ($("." + window.location.hash.substring(1)).parent().attr('class') != "visible") {
            $("." + window.location.hash.substring(1)).parent().parent().css("background-image", "url(//d2xfispw8k8nwr.cloudfront.net/images/down_arrow.gif)")
        }
    loadContent(window.location.hash.substring(1))
    }
}
function doThisWhenTheHashChanges(){
   internalContent(window.location.href.substring(window.location.href.indexOf('#') + 1))
}
window.addEventListener("hashchange", doThisWhenTheHashChanges, false)

$(document).on("click", ".helpContentArea a", function() {
    hashURL = $(this).attr('href')
    contentHash = hashURL.substring(hashURL.indexOf('#') + 1)
    if ($(this).attr('href').indexOf('help.htm') > 10) {
        event.preventDefault()
        internalContent(contentHash)
    }
})

$(document).ready(function() {
    if (window.location.hash) {
        $("." + window.location.hash.substring(1)).parent().addClass("visible")

        if ($("." + window.location.hash.substring(1)).parent().attr('class') != "visible") {
            $("." + window.location.hash.substring(1)).parent().parent().css("background-image", "url(//d2xfispw8k8nwr.cloudfront.net/images/down_arrow.gif)")
        }
        loadContent(window.location.hash.substring(1))
    } else {
        $(".delivery ul").addClass("visible")
        $(".helpContentArea").load("https://s3.eu-west-2.amazonaws.com/toast-stores-files/map.htm", function(responseTxt, statusTxt, xhr) {
            $(".delivery").css("background-image", "url(//d2xfispw8k8nwr.cloudfront.net/images/down_arrow.gif)")
            if (statusTxt == "error") {
                $(".helpContentArea").html("Error loading content: " + xhr.status + ": " + xhr.statusText)
            }
        })
    }
})


// mapping 

var gmarkers = []
var map = null
var markerclusterer = null
var image = '//s3.eu-west-2.amazonaws.com/toast-stores-files/images/TOAST_Pin.png'

function createMarker(latlng, name, html) {
    var contentString = html;
    var marker = new google.maps.Marker({
        position: latlng,
        icon:  image,
        zIndex: Math.round(latlng.lat()*-100000)<<5
    })

    google.maps.event.addListener(marker, 'click', function() {
        infowindow.setContent(contentString)
        infowindow.open(map,marker)

        internalContent(contentString.toLowerCase())
    })

    gmarkers.push(marker)
}


function myclick(i) {
  google.maps.event.trigger(gmarkers[i], "click")
}


function initialize() {

      if (window.innerWidth < 769) {
        zoomLevel = 6
      } else {
        zoomLevel = 7
      }

      var myOptions = {
        zoom: zoomLevel,
        center: new google.maps.LatLng(52.384716,-1.746826),
        mapTypeControl: true,
        mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU},
        navigationControl: true,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        styles:[ { "featureType": "administrative", "elementType": "labels.text.fill", "stylers": [ { "color": "#444444" } ] }, { "featureType": "landscape", "elementType": "all", "stylers": [ { "color": "#f2f2f2" } ] }, { "featureType": "poi", "elementType": "all", "stylers": [ { "visibility": "off" } ] }, { "featureType": "poi.government", "elementType": "all", "stylers": [ { "visibility": "off" }, { "color": "#ff0000" } ] }, { "featureType": "poi.park", "elementType": "all", "stylers": [ { "visibility": "on" }, { "color": "#ececec" } ] }, { "featureType": "road", "elementType": "all", "stylers": [ { "saturation": -100 }, { "lightness": 45 }, { "visibility": "on" }, { "color": "#dddddd" } ] }, { "featureType": "road", "elementType": "geometry", "stylers": [ { "visibility": "off" } ] }, { "featureType": "road", "elementType": "geometry.stroke", "stylers": [ { "weight": "0.38" } ] }, { "featureType": "road", "elementType": "labels", "stylers": [ { "visibility": "off" } ] }, { "featureType": "road.highway", "elementType": "all", "stylers": [ { "visibility": "off" }, { "color": "#e4e4e4" } ] }, { "featureType": "road.highway", "elementType": "geometry.stroke", "stylers": [ { "weight": "0.27" }, { "visibility": "on" }, { "color": "#e5e5e5" } ] }, { "featureType": "road.highway", "elementType": "labels", "stylers": [ { "visibility": "off" } ] }, { "featureType": "road.highway.controlled_access", "elementType": "all", "stylers": [ { "visibility": "off" } ] }, { "featureType": "road.highway.controlled_access", "elementType": "labels", "stylers": [ { "visibility": "off" }, { "color": "#ffffff" } ] }, { "featureType": "road.arterial", "elementType": "all", "stylers": [ { "visibility": "on" } ] }, { "featureType": "road.arterial", "elementType": "geometry.stroke", "stylers": [ { "visibility": "off" } ] }, { "featureType": "road.arterial", "elementType": "labels.text", "stylers": [ { "visibility": "off" } ] }, { "featureType": "road.arterial", "elementType": "labels.icon", "stylers": [ { "visibility": "off" }, { "color": "#ffffff" } ] }, { "featureType": "road.local", "elementType": "all", "stylers": [ { "visibility": "off" } ] }, { "featureType": "road.local", "elementType": "labels", "stylers": [ { "visibility": "off" }, { "color": "#ff0000" } ] }, { "featureType": "transit", "elementType": "all", "stylers": [ { "visibility": "off" } ] }, { "featureType": "transit", "elementType": "labels", "stylers": [ { "visibility": "off" } ] }, { "featureType": "transit.line", "elementType": "all", "stylers": [ { "visibility": "off" } ] }, { "featureType": "transit.station", "elementType": "all", "stylers": [ { "visibility": "off" } ] }, { "featureType": "water", "elementType": "all", "stylers": [ { "color": "#ffffff" }, { "visibility": "on" } ] }]
      }
      map = new google.maps.Map(document.getElementById("map_canvas"), myOptions)

      google.maps.event.addListener(map, 'click', function() {
        infowindow.close()
      })



      for (var i = 0; i < markers.length; i++) {
        var sites = markers[i]
        var lat = sites[1]
        var lng = sites[2]
        var point = new google.maps.LatLng(lat,lng)
        var id = sites[0]
        //var country = "Some stuff"
        var html= id
        var marker = createMarker(point,id,html)
      }
      markerCluster = new MarkerClusterer(map, gmarkers, {imagePath: '//s3.eu-west-2.amazonaws.com/toast-stores-files/images/'})  
}
 
var infowindow = new google.maps.InfoWindow(
  { 
    size: new google.maps.Size(150,50)
})

</script>    ​